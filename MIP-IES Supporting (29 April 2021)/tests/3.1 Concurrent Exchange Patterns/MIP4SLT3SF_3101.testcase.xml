<?xml version="1.0"?>
<TestCase xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="https://mip-interop.org/schemas/SEPT/2016/09/29/TestAutomation.xsd">
  <TestCaseId>
    <TestCaseIdBlock>MIP4</TestCaseIdBlock>
    <TestCaseIdLevel>SLT3SF</TestCaseIdLevel>
    <TestCaseIdGroup>31</TestCaseIdGroup>
    <TestCaseIdNumber>1</TestCaseIdNumber>
  </TestCaseId>
  <TestCaseTitle>File - P/S</TestCaseTitle>
  <TestCaseExecutionPriority>1</TestCaseExecutionPriority>
  <TestCaseObjective>The Provider exports the data via file and Consumer imports it.  Consumer is already subscribing to notifications.</TestCaseObjective>
  <TestCaseScenario>The Consumer is interested in receiving regular updates of the Current Situation in an asynchronous way (i.e. without polling the Producer). The Producer exports a file (possibly to re-initialise Consumer) which the consumer receives and processes.</TestCaseScenario>
  <TestCaseEnvironment>Internet or Co-located. Exchange Pattern: P/S.</TestCaseEnvironment>
  <TestCaseMaximumParticipation>2 </TestCaseMaximumParticipation>
  <TestCasePreCondition>MIP4SLT1_1211,  MIP4SLT1_1213, MIP4SLT1_1215
Prior to initiating exchange of MIP4.0 messages, each participant in the exchange will complete the MIP4.0 Joining Questionnaire [REF-MIP-5] and share this questionnaire with their exchange partners. The exchange of completed questionnaires will:
* Inform exchange partners of the capabilities of a partner system
* Allow  partners to exchange source identifiers
* Aid in the early identification of potential issues

The exchange partners are expected to resolve any identified issues prior to the actual exchange of MIP4.0 messages.

Exigence-1 Prior to initiating MIP4.0 Information Exchange, the exchange partners shall complete and share the MIP4.0 Joining Questionnaire.[REF-MIP-5]

Both Consumer and Producer systems conform to MIP4.0 Publish/Subscribe Exchange Pattern Specification.
Both Consumer and Producer are able to process and exchange information represented according to MIP4.0 Information Schemas.Consumer successfully discovered the target Producer. The system on the Consumer side has been properly configured and is ready to interact with the Producer system. The Consumer has subscribed for at least one notification that the Producer is exporting.</TestCasePreCondition>
  <TestCaseInput>N/A.</TestCaseInput>
  <TestCaseConclusion>The test is concluded after the Consumer successfully receives and processes the transmitted file.</TestCaseConclusion>
  <TestCaseOutput>N/A.</TestCaseOutput>
  <TestCaseTraceability>REQ_SYS_0013.</TestCaseTraceability>
  <TestCaseStep>
    <TestCaseStepNumber>1</TestCaseStepNumber>
    <TestCaseStepAction>Producer (1) checks the subscription filter and determines if data matches specified filter. For this test, the Producer must be broadcasting data which matches the specified filter, so the Producer sends a wsn-b:Notify to the address specified in the wsn-b:ConsumerReference. </TestCaseStepAction>
    <TestCaseStepResult>The Producer (1) sends notification to the Consumer (2) and exports the subscription data as a file.
The Consumer imports the file correctly and processes the data contained in the file correctly. </TestCaseStepResult>
    <TestCaseStepDestination>2</TestCaseStepDestination>
    <TestCaseStepSource>1</TestCaseStepSource>
  </TestCaseStep>
  <TestCaseEventGeneration>true</TestCaseEventGeneration>
</TestCase>