<?xml version="1.0"?>
<TestCase xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="https://mip-interop.org/schemas/SEPT/2016/09/29/TestAutomation.xsd">
  <TestCaseId>
    <TestCaseIdBlock>MIP4</TestCaseIdBlock>
    <TestCaseIdLevel>SLT3SF</TestCaseIdLevel>
    <TestCaseIdGroup>35</TestCaseIdGroup>
    <TestCaseIdNumber>2</TestCaseIdNumber>
  </TestCaseId>
  <TestCaseTitle>MIP4 Message Elements breakdown.</TestCaseTitle>
  <TestCaseExecutionPriority>1</TestCaseExecutionPriority>
  <TestCaseObjective>To verify that it is possible to resume operational data exchange between C2ISs after the MIP4 database of one nation (understood as the national database in which the exchanged MIP4 data are stored, whatever kind of database it is) has broken down or has crashed. The time between when the 'crash' occurs and at which operational data-exchange is resumed does not exceed 60 minutes (MTTR).</TestCaseObjective>
  <TestCaseScenario>Nation A and Nation B are exchanging operational data between C2IS systems. Nation B's MIP4 database crashes. Nation B is able to restore some backed up data according to national procedures. Nation A and Nation B re-subscribe to each other's Topics, and operational data exchange is resumed. After recovery from the crash, identifiers previously used by Nation B are never re-used.</TestCaseScenario>
  <TestCaseEnvironment>Co-located. Exchange Pattern: P/S, R/R</TestCaseEnvironment>
  <TestCaseMaximumParticipation>2</TestCaseMaximumParticipation>
  <TestCasePreCondition>Both nations have subscribed to all of each other's available Topics. Operational data flows between Nation A and Nation B. This test shall be performed after several other ones to enable Nation A and Nation B to get a minimum of information in their database.Nation B is assumed to have its own national recovery procedure enabling to resume from a database 'crash'. The Nation B recovery procedure is turned 'on'.</TestCasePreCondition>
  <TestCaseInput>N/A</TestCaseInput>
  <TestCaseConclusion>Both Nation A and Nation B are able to resume operational data exchange via their respective C2ISs.</TestCaseConclusion>
  <TestCaseOutput>N/A</TestCaseOutput>
  <TestCaseTraceability>REQ_SYS_0001, REQ_SYS_0002</TestCaseTraceability>
  <TestCaseStep>
    <TestCaseStepNumber>1</TestCaseStepNumber>
    <TestCaseStepAction>Nation A and Nation B are into an operational state, and operational data is being exchanged between Nation A and Nation B (bi-directional, P/S and/or R/R). </TestCaseStepAction>
    <TestCaseStepResult>Gateways are in an operational state and exchange operational data. </TestCaseStepResult>
    <TestCaseStepDestination>2,1</TestCaseStepDestination>
    <TestCaseStepSource>1,2</TestCaseStepSource>
  </TestCaseStep>
  <TestCaseStep>
    <TestCaseStepNumber>2</TestCaseStepNumber>
    <TestCaseStepAction>To simulate a 'crash', Nation B deletes all the tables in its MIP4 database or changes of machine. The crash occurs at time T1. </TestCaseStepAction>
    <TestCaseStepResult>The connections between A and B could be broken or let 'alive' (depending on implementation). </TestCaseStepResult>
    <TestCaseStepDestination />
    <TestCaseStepSource>2</TestCaseStepSource>
  </TestCaseStep>
  <TestCaseStep>
    <TestCaseStepNumber>3</TestCaseStepNumber>
    <TestCaseStepAction>The operator of Nation A is informed by an alternative means of communication that Nation B's MIP4 database has 'crashed'. The time at which the 'crash' occurs is recorded.</TestCaseStepAction>
    <TestCaseStepResult>Nation A is aware of the situation. </TestCaseStepResult>
    <TestCaseStepDestination>1</TestCaseStepDestination>
    <TestCaseStepSource>2</TestCaseStepSource>
  </TestCaseStep>
  <TestCaseStep>
    <TestCaseStepNumber>4</TestCaseStepNumber>
    <TestCaseStepAction>Nation B proceeds to re-establish its MIP4 database, as per national procedures. Some own data previously sent may be missing. In that later case Nation B has to create new information to recover from the missing own data. In any case, Nation B has to guarantee uniqueness of identifiers.</TestCaseStepAction>
    <TestCaseStepResult>

2


5. 

Both nations re-establish connection, resynchronise (R/R) and subscribe to all of each other's Topics. </TestCaseStepResult>
    <TestCaseStepDestination>1,2</TestCaseStepDestination>
    <TestCaseStepSource>Nation A and Nation B are resynchronised with the proper batch or event updates. The time T2 when the resynchronisation process is ended is recorded. It should be such than T2-T1 is less than one hour. ~~</TestCaseStepSource>
  </TestCaseStep>
  <TestCaseStep>
    <TestCaseStepNumber>6</TestCaseStepNumber>
    <TestCaseStepAction>Nation A publishes new data (P/S). </TestCaseStepAction>
    <TestCaseStepResult>Nation B receives and displays new data from Nation A. </TestCaseStepResult>
    <TestCaseStepDestination>1</TestCaseStepDestination>
    <TestCaseStepSource />
  </TestCaseStep>
  <TestCaseStep>
    <TestCaseStepNumber>7</TestCaseStepNumber>
    <TestCaseStepAction>Nation B publishes new data (P/S). </TestCaseStepAction>
    <TestCaseStepResult>Nation A receives and displays new data from Nation B. </TestCaseStepResult>
    <TestCaseStepDestination>1</TestCaseStepDestination>
    <TestCaseStepSource>2</TestCaseStepSource>
  </TestCaseStep>
  <TestCaseEventGeneration>true</TestCaseEventGeneration>
</TestCase>